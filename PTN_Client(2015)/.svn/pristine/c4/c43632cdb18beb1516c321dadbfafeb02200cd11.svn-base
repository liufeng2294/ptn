<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nms.db.dao.perform.HisPerformanceInfoMapper" >
  <resultMap id="BaseResultMap" type="HisPerformanceInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="siteId" property="siteid" jdbcType="INTEGER" />
    <result column="slotId" property="slotid" jdbcType="INTEGER" />
    <result column="objectid" property="objectid" jdbcType="INTEGER" />
    <result column="objectname" property="objectname" jdbcType="VARCHAR" />
    <result column="objecttype" property="objecttype" jdbcType="INTEGER" />
    <result column="performancecode" property="performancecode" jdbcType="INTEGER" />
    <result column="performancevalue" property="performancevalue" jdbcType="REAL" />
    <result column="performancetime" property="performancetime" jdbcType="VARCHAR" />
    <result column="performanceEndtime" property="performanceendtime" jdbcType="VARCHAR" />
    <result column="taskId" property="taskid" jdbcType="INTEGER" />
    <result column="isCardOrSite" property="iscardorsite" jdbcType="INTEGER" />
    <result column="startTime" property="starttime" jdbcType="VARCHAR" />
    <result column="monitor" property="monitor" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, siteId, slotId, objectid, objectname, objecttype, performancecode, performancevalue, 
    performancetime, performanceEndtime, taskId, isCardOrSite, startTime, monitor
  </sql>
  
   <select id="selectHisPerformanceCount" resultType="java.lang.Integer"  >
    select count(*) from history_performance
   </select>

 <delete id="deleteById"   parameterType="java.lang.Integer">
    delete from history_performance
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByIds" parameterType="java.lang.Integer">
   delete from history_performance where id in 
   <foreach item="item"  index="index" collection="list" open="(" separator="," close=")">
     #{item}
   </foreach >
  </delete>
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from history_performance
    where id = #{id,jdbcType=INTEGER}
  </select>
 
  <insert id="insert" parameterType="HisPerformanceInfo" >
    insert into history_performance (id, siteId, slotId, 
      objectid, objectname, objecttype, 
      performancecode, performancevalue, performancetime, 
      performanceEndtime, taskId, isCardOrSite, 
      startTime, monitor)
    values (#{id,jdbcType=INTEGER}, #{siteid,jdbcType=INTEGER}, #{slotid,jdbcType=INTEGER}, 
      #{objectid,jdbcType=INTEGER}, #{objectname,jdbcType=VARCHAR}, #{objecttype,jdbcType=INTEGER}, 
      #{performancecode,jdbcType=INTEGER}, #{performancevalue,jdbcType=REAL}, #{performancetime,jdbcType=VARCHAR}, 
      #{performanceendtime,jdbcType=VARCHAR}, #{taskid,jdbcType=INTEGER}, #{iscardorsite,jdbcType=INTEGER}, 
      #{starttime,jdbcType=VARCHAR}, #{monitor,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="HisPerformanceInfo" >
    insert into history_performance
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="siteid != null" >
        siteId,
      </if>
      <if test="slotid != null" >
        slotId,
      </if>
      <if test="objectid != null" >
        objectid,
      </if>
      <if test="objectname != null" >
        objectname,
      </if>
      <if test="objecttype != null" >
        objecttype,
      </if>
      <if test="performancecode != null" >
        performancecode,
      </if>
      <if test="performancevalue != null" >
        performancevalue,
      </if>
      <if test="performancetime != null" >
        performancetime,
      </if>
      <if test="performanceendtime != null" >
        performanceEndtime,
      </if>
      <if test="taskid != null" >
        taskId,
      </if>
      <if test="iscardorsite != null" >
        isCardOrSite,
      </if>
      <if test="starttime != null" >
        startTime,
      </if>
      <if test="monitor != null" >
        monitor,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="siteid != null" >
        #{siteid,jdbcType=INTEGER},
      </if>
      <if test="slotid != null" >
        #{slotid,jdbcType=INTEGER},
      </if>
      <if test="objectid != null" >
        #{objectid,jdbcType=INTEGER},
      </if>
      <if test="objectname != null" >
        #{objectname,jdbcType=VARCHAR},
      </if>
      <if test="objecttype != null" >
        #{objecttype,jdbcType=INTEGER},
      </if>
      <if test="performancecode != null" >
        #{performancecode,jdbcType=INTEGER},
      </if>
      <if test="performancevalue != null" >
        #{performancevalue,jdbcType=REAL},
      </if>
      <if test="performancetime != null" >
        #{performancetime,jdbcType=VARCHAR},
      </if>
      <if test="performanceendtime != null" >
        #{performanceendtime,jdbcType=VARCHAR},
      </if>
      <if test="taskid != null" >
        #{taskid,jdbcType=INTEGER},
      </if>
      <if test="iscardorsite != null" >
        #{iscardorsite,jdbcType=INTEGER},
      </if>
      <if test="starttime != null" >
        #{starttime,jdbcType=VARCHAR},
      </if>
      <if test="monitor != null" >
        #{monitor,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="HisPerformanceInfo" >
    update history_performance
    <set >
      <if test="siteid != null" >
        siteId = #{siteid,jdbcType=INTEGER},
      </if>
      <if test="slotid != null" >
        slotId = #{slotid,jdbcType=INTEGER},
      </if>
      <if test="objectid != null" >
        objectid = #{objectid,jdbcType=INTEGER},
      </if>
      <if test="objectname != null" >
        objectname = #{objectname,jdbcType=VARCHAR},
      </if>
      <if test="objecttype != null" >
        objecttype = #{objecttype,jdbcType=INTEGER},
      </if>
      <if test="performancecode != null" >
        performancecode = #{performancecode,jdbcType=INTEGER},
      </if>
      <if test="performancevalue != null" >
        performancevalue = #{performancevalue,jdbcType=REAL},
      </if>
      <if test="performancetime != null" >
        performancetime = #{performancetime,jdbcType=VARCHAR},
      </if>
      <if test="performanceendtime != null" >
        performanceEndtime = #{performanceendtime,jdbcType=VARCHAR},
      </if>
      <if test="taskid != null" >
        taskId = #{taskid,jdbcType=INTEGER},
      </if>
      <if test="iscardorsite != null" >
        isCardOrSite = #{iscardorsite,jdbcType=INTEGER},
      </if>
      <if test="starttime != null" >
        startTime = #{starttime,jdbcType=VARCHAR},
      </if>
      <if test="monitor != null" >
        monitor = #{monitor,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="HisPerformanceInfo" >
    update history_performance
    set siteId = #{siteid,jdbcType=INTEGER},
      slotId = #{slotid,jdbcType=INTEGER},
      objectid = #{objectid,jdbcType=INTEGER},
      objectname = #{objectname,jdbcType=VARCHAR},
      objecttype = #{objecttype,jdbcType=INTEGER},
      performancecode = #{performancecode,jdbcType=INTEGER},
      performancevalue = #{performancevalue,jdbcType=REAL},
      performancetime = #{performancetime,jdbcType=VARCHAR},
      performanceEndtime = #{performanceendtime,jdbcType=VARCHAR},
      taskId = #{taskid,jdbcType=INTEGER},
      isCardOrSite = #{iscardorsite,jdbcType=INTEGER},
      startTime = #{starttime,jdbcType=VARCHAR},
      monitor = #{monitor,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  <update id="updateObjectid" >
		update history_performance set objectid = #{0} where objecttype =#{2} and objectid in #{1}
  </update>
  
  <select id="queryByCondition" resultType="HisPerformanceInfo" parameterType="HisPerformanceInfo" >
    SELECT * from history_performance where 1=1 
  	<if test="id > 0">
  		id = #{id}
  	</if>
  	<if test="siteId > 0">
  		siteId = #{siteId}
  	</if>
  	<if test="slotId > 0">
  		slotId = #{slotId}
  	</if>
  	<if test="objectType!= null and objectType !='' ">
  		objectType = #{objectType}
  	</if>
  	<if test="objectName != null and objectName !='' ">
  		objectName = #{objectName}
  	</if>
  	<if test="performanceCode != 0">
  		performanceCode = #{performanceCode}
  	</if>
  	<if test="performanceValue != 0">
  		performanceValue = #{performanceValue}
  	</if>
  	<if test="performanceTime != null">
  		performanceTime = #{performanceTime}
  	</if>
  	<if test="performanceEndtime != null">
  		performanceEndtime = #{performanceEndtime}
  	</if>
  	<if test="startTime != null">
  		startTime = #{startTime}
  	</if>
  	<if test="taskId != 0">
  		taskId = #{taskId}
  	</if><if test="isCardOrSite != 0">
  		isCardOrSite = #{isCardOrSite}
  	</if>
  </select>
  
  <select id="queryByConditionTime" resultType="HisPerformanceInfo"  >
    SELECT * from history_performance where startTime BETWEEN #{0} and #{1}
  </select>
  
  <select id="selectCount" resultType="HisPerformanceInfo" parameterType="map" >
    select count(*) from history_performance where 1=1
    <if test="siteIdList != null">
    	and siteId in 
    	<foreach item="item" index="index" collection="siteIdList"
			open="(" separator="," close=")">
			#{item}
		</foreach>
    </if>
    <if test="filter != null" >
    	<if test="filter.objectType != null and filter.objectType=2 ">
    		and slotId in
    		<foreach item="item" index="index" collection="filter.slotInsts"
				open="(" separator="," close=")">
				#{item}
			</foreach>
    	</if >
    	<if test="filter.performanceCodeList != null and ">
    		and performancecode in
    		<foreach item="item" index="index" collection="filter.performanceCodeList"
				open="(" separator="," close=")">
				#{item}
			</foreach>
    	</if>
    	<if test="fiterZero >0">
    		and performancevalue != 0
    	</if>
    	<if test="isCardOrSite >-1">
    		and isCardOrSite =#{isCardOrSite}
    	</if>
    	
    </if>
  </select>
  
  
</mapper>