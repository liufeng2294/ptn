<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nms.db.dao.alarm.CurrentAlarmInfoMapper" >
  <resultMap id="BaseResultMap" type="CurrentAlarmInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="siteid" property="siteid" jdbcType="INTEGER" />
    <result column="slotId" property="slotid" jdbcType="INTEGER" />
    <result column="objectid" property="objectid" jdbcType="INTEGER" />
    <result column="objecttype" property="objecttype" jdbcType="INTEGER" />
    <result column="objectname" property="objectname" jdbcType="VARCHAR" />
    <result column="alarmcode" property="alarmcode" jdbcType="INTEGER" />
    <result column="alarmlevel" property="alarmlevel" jdbcType="INTEGER" />
    <result column="happenedtime" property="happenedtime" jdbcType="VARCHAR" />
    <result column="confirmtime" property="confirmtime" jdbcType="VARCHAR" />
    <result column="clearedtime" property="clearedtime" jdbcType="VARCHAR" />
    <result column="ackuser" property="ackuser" jdbcType="VARCHAR" />
    <result column="comments" property="comments" jdbcType="VARCHAR" />
    <result column="capabilityCode" property="capabilitycode" jdbcType="INTEGER" />
    <result column="capabilityIdentity" property="capabilityidentity" jdbcType="VARCHAR" />
    <result column="alarmlevel_temp" property="alarmlevelTemp" jdbcType="INTEGER" />
    <result column="isCleared" property="iscleared" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, siteid, slotId, objectid, objecttype, objectname, alarmcode, alarmlevel, happenedtime, 
    confirmtime, clearedtime, ackuser, comments, capabilityCode, capabilityIdentity, 
    alarmlevel_temp, isCleared
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from current_alarm
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from current_alarm
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="CurrentAlarmInfo" >
    insert into current_alarm (id, siteid, slotId, 
      objectid, objecttype, objectname, 
      alarmcode, alarmlevel, happenedtime, 
      confirmtime, clearedtime, ackuser, 
      comments, capabilityCode, capabilityIdentity, 
      alarmlevel_temp, isCleared)
    values (#{id,jdbcType=INTEGER}, #{siteid,jdbcType=INTEGER}, #{slotid,jdbcType=INTEGER}, 
      #{objectid,jdbcType=INTEGER}, #{objecttype,jdbcType=INTEGER}, #{objectname,jdbcType=VARCHAR}, 
      #{alarmcode,jdbcType=INTEGER}, #{alarmlevel,jdbcType=INTEGER}, #{happenedtime,jdbcType=VARCHAR}, 
      #{confirmtime,jdbcType=VARCHAR}, #{clearedtime,jdbcType=VARCHAR}, #{ackuser,jdbcType=VARCHAR}, 
      #{comments,jdbcType=VARCHAR}, #{capabilitycode,jdbcType=INTEGER}, #{capabilityidentity,jdbcType=VARCHAR}, 
      #{alarmlevelTemp,jdbcType=INTEGER}, #{iscleared,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="CurrentAlarmInfo" >
    insert into current_alarm
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="siteid != null" >
        siteid,
      </if>
      <if test="slotid != null" >
        slotId,
      </if>
      <if test="objectid != null" >
        objectid,
      </if>
      <if test="objecttype != null" >
        objecttype,
      </if>
      <if test="objectname != null" >
        objectname,
      </if>
      <if test="alarmcode != null" >
        alarmcode,
      </if>
      <if test="alarmlevel != null" >
        alarmlevel,
      </if>
      <if test="happenedtime != null" >
        happenedtime,
      </if>
      <if test="confirmtime != null" >
        confirmtime,
      </if>
      <if test="clearedtime != null" >
        clearedtime,
      </if>
      <if test="ackuser != null" >
        ackuser,
      </if>
      <if test="comments != null" >
        comments,
      </if>
      <if test="capabilitycode != null" >
        capabilityCode,
      </if>
      <if test="capabilityidentity != null" >
        capabilityIdentity,
      </if>
      <if test="alarmlevelTemp != null" >
        alarmlevel_temp,
      </if>
      <if test="iscleared != null" >
        isCleared,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="siteid != null" >
        #{siteid,jdbcType=INTEGER},
      </if>
      <if test="slotid != null" >
        #{slotid,jdbcType=INTEGER},
      </if>
      <if test="objectid != null" >
        #{objectid,jdbcType=INTEGER},
      </if>
      <if test="objecttype != null" >
        #{objecttype,jdbcType=INTEGER},
      </if>
      <if test="objectname != null" >
        #{objectname,jdbcType=VARCHAR},
      </if>
      <if test="alarmcode != null" >
        #{alarmcode,jdbcType=INTEGER},
      </if>
      <if test="alarmlevel != null" >
        #{alarmlevel,jdbcType=INTEGER},
      </if>
      <if test="happenedtime != null" >
        #{happenedtime,jdbcType=VARCHAR},
      </if>
      <if test="confirmtime != null" >
        #{confirmtime,jdbcType=VARCHAR},
      </if>
      <if test="clearedtime != null" >
        #{clearedtime,jdbcType=VARCHAR},
      </if>
      <if test="ackuser != null" >
        #{ackuser,jdbcType=VARCHAR},
      </if>
      <if test="comments != null" >
        #{comments,jdbcType=VARCHAR},
      </if>
      <if test="capabilitycode != null" >
        #{capabilitycode,jdbcType=INTEGER},
      </if>
      <if test="capabilityidentity != null" >
        #{capabilityidentity,jdbcType=VARCHAR},
      </if>
      <if test="alarmlevelTemp != null" >
        #{alarmlevelTemp,jdbcType=INTEGER},
      </if>
      <if test="iscleared != null" >
        #{iscleared,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="CurrentAlarmInfo" >
    update current_alarm
    <set >
      <if test="siteid != null" >
        siteid = #{siteid,jdbcType=INTEGER},
      </if>
      <if test="slotid != null" >
        slotId = #{slotid,jdbcType=INTEGER},
      </if>
      <if test="objectid != null" >
        objectid = #{objectid,jdbcType=INTEGER},
      </if>
      <if test="objecttype != null" >
        objecttype = #{objecttype,jdbcType=INTEGER},
      </if>
      <if test="objectname != null" >
        objectname = #{objectname,jdbcType=VARCHAR},
      </if>
      <if test="alarmcode != null" >
        alarmcode = #{alarmcode,jdbcType=INTEGER},
      </if>
      <if test="alarmlevel != null" >
        alarmlevel = #{alarmlevel,jdbcType=INTEGER},
      </if>
      <if test="happenedtime != null" >
        happenedtime = #{happenedtime,jdbcType=VARCHAR},
      </if>
      <if test="confirmtime != null" >
        confirmtime = #{confirmtime,jdbcType=VARCHAR},
      </if>
      <if test="clearedtime != null" >
        clearedtime = #{clearedtime,jdbcType=VARCHAR},
      </if>
      <if test="ackuser != null" >
        ackuser = #{ackuser,jdbcType=VARCHAR},
      </if>
      <if test="comments != null" >
        comments = #{comments,jdbcType=VARCHAR},
      </if>
      <if test="capabilitycode != null" >
        capabilityCode = #{capabilitycode,jdbcType=INTEGER},
      </if>
      <if test="capabilityidentity != null" >
        capabilityIdentity = #{capabilityidentity,jdbcType=VARCHAR},
      </if>
      <if test="alarmlevelTemp != null" >
        alarmlevel_temp = #{alarmlevelTemp,jdbcType=INTEGER},
      </if>
      <if test="iscleared != null" >
        isCleared = #{iscleared,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="CurrentAlarmInfo" >
    update current_alarm
    set siteid = #{siteid,jdbcType=INTEGER},
      slotId = #{slotid,jdbcType=INTEGER},
      objectid = #{objectid,jdbcType=INTEGER},
      objecttype = #{objecttype,jdbcType=INTEGER},
      objectname = #{objectname,jdbcType=VARCHAR},
      alarmcode = #{alarmcode,jdbcType=INTEGER},
      alarmlevel = #{alarmlevel,jdbcType=INTEGER},
      happenedtime = #{happenedtime,jdbcType=VARCHAR},
      confirmtime = #{confirmtime,jdbcType=VARCHAR},
      clearedtime = #{clearedtime,jdbcType=VARCHAR},
      ackuser = #{ackuser,jdbcType=VARCHAR},
      comments = #{comments,jdbcType=VARCHAR},
      capabilityCode = #{capabilitycode,jdbcType=INTEGER},
      capabilityIdentity = #{capabilityidentity,jdbcType=VARCHAR},
      alarmlevel_temp = #{alarmlevelTemp,jdbcType=INTEGER},
      isCleared = #{iscleared,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <!--  
   <select id="query_join" resultMap="CurrentAlarm" parameterType="CurrentAlarmInfo" >
     SELECT s.*, c.*,w.* FROM site_inst s, current_alarm c, warninglevel w WHERE s.site_inst_id = c.siteid 
  AND c.alarmcode = w.WarningCode AND c.alarmlevel = w.WarningLevel AND w.Manufacturer = 
  ( CASE WHEN ( SELECT co.codeValue FROM `code` co WHERE co.id = s.CellEditon ) = '0' THEN 1 ELSE 2 END )
  <if test="id>0">and c.id=#{id}</if>
  <if test="siteId!=0">and c.siteid=#{siteId}</if>
  <if test="slotId!=0">and c.slotId=#{slotId}</if>
  <if test="objectId!=0">and c.objectid=#{objectId}</if>
  <if test="objectType!=0">and c.objecttype=#{objectType}</if>
  <if test="alarmCode!=0">and c.alarmcode=#{alarmCode}</if>
  <if test="alarmLevel!=0">and c.alarmlevel=#{alarmLevel}</if> 
  <if test="warningLevel_temp!=0">and c.alarmlevel_temp=#{warningLevel_temp}</if> 
  <if test="alarmTime!=null and alarmTime!='' ">and c.happenedtime=#{alarmTime}</if> 
  <if test="objectName!=null and objectName!='' ">and c.objectname=#{objectName}</if>
  ORDER BY happenedtime desc
  </select>
<resultMap id="CurrentAlarm" type="CurrentAlarmInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="c.siteid" property="siteId" jdbcType="INTEGER" />
    <result column="c.slotId" property="slotId" jdbcType="INTEGER" />
    <result column="c.objectid" property="objectId" jdbcType="INTEGER" />
    <result column="c.objecttype" property="objectType" jdbcType="INTEGER" />
    <result column="c.objectname" property="objectName" jdbcType="VARCHAR" />
    <result column="c.alarmcode" property="alarmCode" jdbcType="INTEGER" />
    <result column="c.alarmlevel" property="alarmLevel" jdbcType="INTEGER" />
    <result column="c.happenedtime" property="raisedTime" jdbcType="VARCHAR" />
    <result column="c.confirmtime" property="ackTime" jdbcType="VARCHAR" />
    <result column="c.clearedtime" property="clearedTime" jdbcType="VARCHAR" />
    <result column="c.ackuser" property="ackUser" jdbcType="VARCHAR" />
    <result column="c.comments" property="comments" jdbcType="VARCHAR" />
    <result column="c.capabilityCode" property="capabilityCode" jdbcType="INTEGER" />
    <result column="c.capabilityIdentity" property="capabilityIdentity" jdbcType="VARCHAR" />
    <result column="c.alarmlevel_temp" property="warningLevel_temp" jdbcType="INTEGER" />
    <result column="c.isCleared" property="isCleared" jdbcType="INTEGER" />
    <result column="s.CellId" property="siteName" jdbcType="INTEGER" />
    <collection property="warningLevel" ofType="WaringLevel" >
        <id property="warningcode" column="w.WarningCode"/>
        <result column="w.id" property="id" jdbcType="INTEGER" />
        <result column="w.warningname" property="warningname" jdbcType="VARCHAR" />
        <result column="w.warningnote" property="warningnote" jdbcType="INTEGER" />
        <result column="w.warninglevel" property="warninglevel" jdbcType="INTEGER" />
        <result column="w.warninglevel_temp" property="warninglevel_temp" jdbcType="INTEGER" />
        <result column="w.warningcode" property="warningcode" jdbcType="INTEGER" />
        <result column="w.warningobject" property="warningobject" jdbcType="VARCHAR" />
        <result column="w.warningtype" property="warningtype" jdbcType="INTEGER" />
        <result column="w.manufacturer" property="manufacturer" jdbcType="INTEGER" />
        <result column="w.warningdescribe" property="warningdescribe" jdbcType="INTEGER" />
        <result column="w.waringeffect" property="waringeffect" jdbcType="VARCHAR" />
        <result column="w.waringremark" property="waringremark" jdbcType="INTEGER" />
        <result column="w.warningadvice" property="warningadvice" jdbcType="INTEGER" />
        <result column="w.warningmayreason" property="warningmayreason" jdbcType="INTEGER" />
    </collection>
  </resultMap>
-->

  <update id="updateObjectid" >
		update current_alarm set objectid = #{0} where objecttype =#{2} and objectid in #{1}
  </update>
</mapper>