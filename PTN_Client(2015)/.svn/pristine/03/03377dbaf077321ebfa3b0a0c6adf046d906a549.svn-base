<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nms.db.dao.alarm.HisAlarmInfoMapper" >
  <resultMap id="BaseResultMap" type="HisAlarmInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="siteid" property="siteid" jdbcType="INTEGER" />
    <result column="slotId" property="slotid" jdbcType="INTEGER" />
    <result column="objectid" property="objectid" jdbcType="INTEGER" />
    <result column="objecttype" property="objecttype" jdbcType="INTEGER" />
    <result column="objectname" property="objectname" jdbcType="VARCHAR" />
    <result column="alarmcode" property="alarmcode" jdbcType="INTEGER" />
    <result column="alarmlevel" property="alarmlevel" jdbcType="INTEGER" />
    <result column="happenedtime" property="happenedtime" jdbcType="VARCHAR" />
    <result column="confirmtime" property="confirmtime" jdbcType="VARCHAR" />
    <result column="clearedtime" property="clearedtime" jdbcType="VARCHAR" />
    <result column="ackuser" property="ackuser" jdbcType="VARCHAR" />
    <result column="comments" property="comments" jdbcType="VARCHAR" />
    <result column="alarmlevel_temp" property="alarmlevelTemp" jdbcType="INTEGER" />
    <result column="isCleared" property="iscleared" jdbcType="INTEGER" />
    <result column="alarmID" property="alarmid" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, siteid, slotId, objectid, objecttype, objectname, alarmcode, alarmlevel, happenedtime, 
    confirmtime, clearedtime, ackuser, comments, alarmlevel_temp, isCleared, alarmID
  </sql>
<<<<<<< .mine
  <insert id="insert" parameterType="HisAlarmInfo" >
    insert into history_alarm (id, siteid, slotId, 
      objectid, objecttype, objectname, 
      alarmcode, alarmlevel, happenedtime, 
      confirmtime, clearedtime, ackuser, 
      comments, alarmlevel_temp, isCleared, 
      alarmID)
    values (#{id,jdbcType=INTEGER}, #{siteId,jdbcType=INTEGER}, #{slotId,jdbcType=INTEGER}, 
      #{objectId,jdbcType=INTEGER}, #{objectType_db,jdbcType=INTEGER}, #{objectName,jdbcType=VARCHAR}, 
      #{alarmCode,jdbcType=INTEGER}, #{alarmLevel,jdbcType=INTEGER}, #{happenedtime,jdbcType=VARCHAR}, 
      #{confirmtime,jdbcType=VARCHAR}, #{cleanTime,jdbcType=VARCHAR}, #{ackUser,jdbcType=VARCHAR}, 
      #{commonts,jdbcType=VARCHAR}, #{warningLevel_temp,jdbcType=INTEGER}, #{isCleared,jdbcType=INTEGER}, 
      #{alarmId,jdbcType=INTEGER})
=======
  <insert id="insert" parameterType="HisAlarmInfo" useGeneratedKeys="true" keyProperty="id" > 
    insert into 
    history_alarm
    (siteid,slotId,objectid,objecttype,objectname ,alarmcode,alarmlevel,happenedtime,
    confirmtime,clearedtime,ackuser,comments,alarmlevel_temp,isCleared,alarmId)
    values(#{siteId},#{slotId},#{objectId},#{objectType_db},#{objectName},#{alarmCode},
    #{alarmLevel},#{happenedtime},#{confirmtime},#{cleanTime},#{ackUser},#{commonts},#{warningLevel_temp},
    #{isClear},#{alarmId})
>>>>>>> .r540
  </insert>
  <update id="update" parameterType="HisAlarmInfo" >
  update  history_alarm as p set p.confirmtime=#{confirmtime},p.happenedtime=#{happenedtime},
  p.clearedtime=#{cleanTime},p.ackuser=#{ackUser}, p.comments=#{commonts},p.alarmlevel=#{alarmLevel},
  p.alarmlevel_temp=#{warningLevel_temp},p.isCleared=#{isCleared},p.alarmId = #{alarmId} where p.id=#{id}
  </update>
  <update id="updateObjectid" >
		update history_alarm set objectid = #{0} where objecttype =#{2} and objectid in #{1}
  </update>
  
</mapper>